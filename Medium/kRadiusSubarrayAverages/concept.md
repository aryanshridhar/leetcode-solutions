Trick is to precalculate the prefix sum of the array.<br>
Next loop ion original array and is an element is valid (i-k && i+k) are valid -> get the corresponding array sum value (from prefix sum) and take avg.
